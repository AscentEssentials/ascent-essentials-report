% !TeX root = thesis-main.tex
\usepackage[\thesislang]{babel}

% common utilities
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{latexsym}
\usepackage{amsthm}
\usepackage[\thesislang]{cleveref}
\usepackage{geometry}
\usepackage{listings}
\usepackage{ifthen}

% \usepackage[disable]{todonotes} % decommentare prima della versione finale
\usepackage{todonotes} % commentare prima della versione finale
\newcommand{\gcsidenote}[1]{\todo[size=\tiny,color=green]{\textbf{GC:} #1}}
\newcommand{\gcnote}[1]{\todo[size=\scriptsize,color=green,inline]{\textbf{Giovanni Ciatto:} #1}}
\newcommand{\dpsidenote}[1]{\todo[size=\tiny,color=red]{\textbf{DP:} #1}}
\newcommand{\dpnote}[1]{\todo[size=\scriptsize,color=red,inline]{\textbf{Danilo Pianini:} #1}}
\newcommand{\rcsidenote}[1]{\todo[size=\tiny,color=cyan]{\textbf{RC:} #1}}
\newcommand{\rcnote}[1]{\todo[size=\scriptsize,color=cyan,inline]{\textbf{Roberta Calegari:} #1}}

\ifthenelse{\equal{italian}{\thesislang}}{
	\renewcommand{\lstlistingname}{Listato}
	\renewcommand{\lstlistlistingname}{Elenco dei listati}
}{}
\ifthenelse{\equal{italian}{\thesislang}}{
	\newcommand{\acknowledgementsname}{Ringraziamenti}
}{
	\newcommand{\acknowledgementsname}{Acknowledgements}	
}
\ifthenelse{\equal{italian}{\thesislang}}{
	\newcommand{\introductionname}{Introduzione}
}{
	\newcommand{\introductionname}{Introduction}	
}
\ifthenelse{\equal{italian}{\thesislang}}{
	\newcommand{\conclusionsname}{Conclusioni}
}{
	\newcommand{\conclusionsname}{Conclusions}	
}

\newenvironment{abstract}{\chapter*{\centering\abstractname}\addcontentsline{toc}{chapter}{\abstractname}}{} 

\newenvironment{acknowledgements}{\chapter*{\acknowledgementsname}}{} 

\newenvironment{dedication}{\chapter*{}\begin{flushright}\itshape}{\normalfont\end{flushright}}

\newcommand{\chapterWithoutNumber}[1]{\chapter*{#1}\addcontentsline{toc}{chapter}{#1}}

%-----------------------------------------------------
% LISTING CONFIGURATIONS
%-----------------------------------------------------

\ifthenelse{\equal{italian}{\thesislang}}{
	\crefname{lstlisting}{listing}{listato}
}{
	\crefname{lstlisting}{listing}{listing}	
}
\Crefname{lstlisting}{Listing}{\lstlistingname}

\lstset{
	showstringspaces=false,
	basicstyle=\ttfamily,
	commentstyle={\color{olive}},
	identifierstyle=\color{black},
	ndkeywordstyle={\color{blue}},
	stringstyle={\color{magenta}},
	emphstyle={},
	keywordstyle={\color{blue}},
	breaklines=true,
	numbers=left,
	numberstyle=\tiny\color{gray},
	numbersep=10pt,
	tabsize=2,
	extendedchars=true,
	frame=trBL,
	frameround=fttt,
}

\lstdefinelanguage{Kotlin}{
	comment=[l]{//},
	emph={delegate, filter, first, firstOrNull, forEach, lazy, map, mapNotNull, println, return@},
	keywords={abstract, actual, as, as?, break, by, class, companion, continue, data, do, dynamic, else, enum, expect, false, final, for, fun, get, if, import, in, interface, internal, is, null, object, override, package, private, public, return, set, super, suspend, this, throw, true, try, typealias, val, var, vararg, when, where, while},
	morecomment=[s]{/*}{*/},
	morestring=[b]",
	morestring=[s]{"""*}{*"""},
	ndkeywords={@Deprecated, @JvmField, @JvmName, @JvmOverloads, @JvmStatic, @JvmSynthetic, Array, Byte, Double, Float, Int, Integer, Iterable, Long, Runnable, Short, String, Unit, it},
	sensitive=true
}

\lstdefinelanguage{JavaScript}{
  morekeywords=[1]{break, continue, delete, else, for, function, if, in,
    new, return, this, typeof, var, void, while, with},
  % Literals, primitive types, and reference types.
  morekeywords=[2]{false, null, true, boolean, number, undefined,
    Array, Boolean, Date, Math, Number, String, Object},
  % Built-ins.
  morekeywords=[3]{eval, parseInt, parseFloat, escape, unescape},
  sensitive,
  morecomment=[s]{/*}{*/},
  morecomment=[l]//,
  morecomment=[s]{/**}{*/}, % JavaDoc style comments
  morestring=[b]',
  morestring=[b]"
}[keywords, comments, strings]


\lstalias[]{ES6}[ECMAScript2015]{JavaScript}

% Requires package: color.
\definecolor{mediumgray}{rgb}{0.3, 0.4, 0.4}
\definecolor{mediumblue}{rgb}{0.0, 0.0, 0.8}
\definecolor{forestgreen}{rgb}{0.13, 0.55, 0.13}
\definecolor{darkviolet}{rgb}{0.58, 0.0, 0.83}
\definecolor{royalblue}{rgb}{0.25, 0.41, 0.88}
\definecolor{crimson}{rgb}{0.86, 0.8, 0.24}

\lstdefinestyle{JSES6Base}{
  backgroundcolor=\color{white},
  basicstyle=\ttfamily,
  breakatwhitespace=false,
  breaklines=false,
  captionpos=b,
  columns=fullflexible,
  commentstyle=\color{mediumgray}\upshape,
  emph={},
  emphstyle=\color{crimson},
  extendedchars=true,  % requires inputenc
  fontadjust=true,
  frame=single,
  identifierstyle=\color{black},
  keepspaces=true,
  keywordstyle=\color{mediumblue},
  keywordstyle={[2]\color{darkviolet}},
  keywordstyle={[3]\color{royalblue}},
  numbers=left,
  numbersep=5pt,
  numberstyle=\tiny\color{black},
  rulecolor=\color{black},
  showlines=true,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  stringstyle=\color{forestgreen},
  tabsize=2,
  title=\lstname,
  upquote=true  % requires textcomp
}

\lstdefinestyle{JavaScript}{
  language=JavaScript,
  style=JSES6Base
}
\lstdefinestyle{ES6}{
  language=ES6,
  style=JSES6Base
}